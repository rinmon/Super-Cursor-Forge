<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <title>Super Cursor Forge</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Super Cursor Forge</h1>
  <div id="version" style="position: absolute; top: 16px; right: 24px; color: #29b6f6; font-weight: bold; font-size: 1.1em; background: #fffde7cc; border-radius: 8px; padding: 2px 10px; z-index: 100;">v0.0.4</div>
  <button id="showRules" style="margin:10px 0 10px 0; padding:8px 18px; font-size:1em; border-radius:8px; border:none; background:#29b6f6; color:#fff; cursor:pointer;">ルール説明</button>
  <div id="rulesModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:#0008; z-index:1000; align-items:center; justify-content:center;">
    <div style="background:#fff; color:#222; border-radius:18px; max-width:420px; margin:auto; padding:24px 20px; box-shadow:0 0 24px #29b6f655; text-align:left; position:relative;">
      <button id="closeRules" style="position:absolute; right:12px; top:12px; background:#eee; color:#222; border:none; border-radius:50%; width:28px; height:28px; font-size:1.1em; cursor:pointer;">×</button>
      <h2 style="margin-top:0;">ゲームのルール</h2>
      <ul style="padding-left:20px;">
        <li>マウスカーソルやタッチで「エネルギーオーブ」を操作します（クリック不要）</li>
        <li>青いゾーンに入ると「構築モード」になり、<b>設計図（＝薄く表示された水色のマス）</b>通りにクリスタルを生成できます</li>
        <li>赤いゾーンに入ると「破壊モード」になり、不要なクリスタルを破壊できます</li>
        <li>エネルギーゲージ（左上）はオーブの移動で減少し、0になるとリスタート</li>
        <li><b>設計図（薄い水色のマス）</b>通りにクリスタルを配置し、ポータル（青い円）に入ればクリア</li>
        <li>クリア後、移動軌跡グラフが表示されます</li>
      </ul>
      <div style="font-size:0.95em; color:#2986cc; margin-bottom:5px;"><b>※「設計図」とは？</b> ステージ上に薄く表示されている水色のマスが設計図です。ここにクリスタルを置きましょう。</div>
      <div style="font-size:0.9em; color:#888; margin-top:10px;">※スマホでも遊べます。タッチ操作対応予定</div>
    </div>
  </div>
  <canvas id="gameCanvas" width="600" height="600"></canvas>
  <div id="ui">
    <div id="energyContainer">
      <canvas id="energyGauge" width="100" height="100"></canvas>
    </div>
    <button id="showGraph" style="display:none;">移動軌跡グラフを表示</button>
    <div id="graphContainer" style="display:none;">
      <canvas id="moveGraph" width="400" height="200"></canvas>
    </div>
  </div>
  <audio id="se-create" src="assets/create.mp3"></audio>
  <audio id="se-break" src="assets/break.mp3"></audio>
  <audio id="bgm" src="assets/bgm.mp3" loop></audio>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="main.js"></script>
</body>
</html>
